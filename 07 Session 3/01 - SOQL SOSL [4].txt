SOQL - Salesforce Object Query Language
    - It retrieves records from Slaesforce objects, similar to SQL in databases.

SOSL - Salesforce Object Search Language 
    - A Search-based query language.
    - Performs full-text searches accross multiple Salesforce projects.

When to use each?
- Use SOQL for targeted queries to retrieve specific data from Salesforce objects (eg. finding all accounts starting with "Tech")
- Use SOSL for broader searches accross multiple objects, like a search engine (eg. searching for "Tech" across Accounts, Contacts and Leads)

SELECT Name, Industry, AnnualRevenue FROM Account WHERE AnnualRevenue > 500000
FIND {Edge} IN ALL FIELDS RETURNING Account(Id, Name), Contact(Id, FirstName, LastName, Email)

SELECT fields
FROM objects
WHERE condition
ORDER BY Field ASC/DESC
LIMIT Limit Number

- Reserve characters and escaping in SOQL

SOQL Aggegate Functions and Working Results in Apex.
SELECT COUNT(Id) noAccounts, SUM(AnnualRevenue) totalRevenue FROM Account 

List<AggregateResult> lstResults=[SELECT COUNT(Id) noAccounts, SUM(AnnualRevenue) totalRevenue FROM Account];
System.debug('AggregateResult '+lstResults);

for (AggregateResult resultObj : lstResults) {
    Integer count = (Integer)resultObj.get('noAccounts');
    Decimal revenue = (Decimal)resultObj.get('totalRevenue');
    
    System.debug('Count '+count);
    System.debug('Revenue '+revenue);
}

- Aggegate Functions are common functions as:
COUNT(), SUM(), AVG(), MIN(), MAX() Used to calculate directly in SOQL queries.

- Handling Aggregate Results in Apex: Aggregate results are not retured as sObject but as AggregateResult objects.
eg. Using AggregateResult to extract calculated data in Apex.

GROUPING AND FILTERING AGGREGATE RESULTS WITH GROUP BY AND HAVING
GROUP BY:
- Group records based on specified fields.
- Used to Aggregatedata by categories or groups.

HAVING Clause:
- Used to filter aggregated results.
- Work like the WHERE clause but applies conditions to grouped records.

Difference between WHERE and HAVING:
- WHERE filters records before aggregation.
- HAVING filters records after aggregation.


SELECT Industry, COUNT(Id) noAccounts, SUM(AnnualRevenue) totalRevenue 
FROM Account 
WHERE AnnualRevenue > 100000
GROUP BY Industry 
HAVING SUM(AnnualRevenue ) > 9000000


Advanced SOQL in Apex Part 3: Relationships, Dynamic Queries, and Security
==========================================================================

1. Querying Parent records from Child Records
SELECT FirstName, LastName, Account.Name, Account.Industry, Account.AnnualRevenue from Contact

custom:
SELECT Name, Project__r.Name from ProjectTask__c

for (Contact contactObj : lstContacts) {    
    System.debug('Contact FirstName '+contactObj.FirstName);
}


2. Querying Child records from Patent Records
- Use subqueries to retreive child recprds related to a parent
SELECT Name, (SELECT FirstName, LastName FROM Contacts) FROM Account

custom:
SELECT Name, (SELECT Name FROM Projects__r ) FROM Contact

List<Account> lstAccounts=[SELECT Name, (SELECT FirstName, LastName FROM Contacts) FROM Account];
System.debug('lstAccounts '+lstAccounts);

for (Account accountObj : lstAccounts) {     
    for(Contact contactObj: accountObj.Contact){
        System.debug('FirstName '+contactObj.FirstName);
    }
}

Quering Multi-Level Parent-Child Relationship on SOQL
- In API version 58.0 and later, SOQL supports upto five levels of parent-child relationships.


What is Dynamic SOQL?
- Dynamic SOQL allows you to build and execute queries at runtime, using strings in Apex.
- It's useful when query conditions are variable or not known until runtime.
- Provides flexibility to dynamically contruct complex queries based on user input or application logic.

SOQL Injection and How to Prevent It
------------------------------------
- While dynamic SOQL adds flexibility, it also introduces potential security risks like SOQl injection.
- Dynamic SOQL queries are built as strings, which can be vulnerable to manipulation if not properly sanitized.
  - Atteckers manipulate user input to change the behaviour of a SOQl query.
  - It can lead to anauthorized data access, data corruption, or deletion.

SOQL Injection Defences:
- To prevent a SOQL injection attack, avoid using dynamic SOQl queries. Instead, use static queries and binding variables.
- If dynamic SOQl is necessary, use escapeSingleQuotes() to sanitize user input.

Mastering SOSL in Apex: Introduction, Syntax, and Best Practices
================================================================
Salesforce Object Search Language (SOSL):
- A text-based search language that allows you to perform full-text searches accross multiple objects.
Use Case:
- Ideal for broad searches when you need to locate a specific term in various fields across different objects.

FIND {searchTearm} IN [searchScope] RETURNING [objectsAndFields]
- FIND {searchTearm}: This search term is what SOSL will look for accross the specified fields.

IN [searchScope]:
- The IN clause specifies where to search within the records.
- Common Scopes are:
    - ALL FIELDS
    - NAME FIELDS
    - EMAIL FIELDS
- It is optional. It is the scope of the fields to search. If not specified, the default search scope is all fields.

RETURNING [objectsAndFields]:
- The RETURNING clause specifies which object and fields to return in the results.
- You can list multiple objects, and for eaaach oject, specify the fields to retieve.
- It is optional. If not specified, the search results contain the IDs of all objects found.

FIND {jon} IN NAME FIELDS RETURNING Account(Id, Name), Contact(FirstName, LastName)

KEY SOSL Search Rules and Examples:
- Exact Word Matching:
    - SOSL only searches for terms that match the begining of words.

- Wildcards Usage:
    - * for zero or more characters
    - ? for exactly one character
    - Wildcards can be used at the middle or end of a term.

Logical Operators:
    - Group terms with AND, OR and parentheses for compound search criteria.

Case-Insensitive Searches:
    - SOSL is case - insensitive; the capitalization of the search term doesn't affect the results.